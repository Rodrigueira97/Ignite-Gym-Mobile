import { useCallback, useEffect, useState } from 'react';
import { FlatList, HStack, Heading, Text, Toast, VStack } from 'native-base';
import { ExerciseCard } from '@components/ExerciseCard';
import { Group } from '@components/Group';
import { HomeHeader } from '@components/HomeHeader';
import { Loading } from '@components/Loading';
import { ExerciseDTO } from '@dtos/exerciseDTO';
import { useFocusEffect, useNavigation } from '@react-navigation/native';
import { AppNavigatorRoutesProps } from '@routes/app.routes';
import { api } from '@services/api';
import { AppError } from '@utils/AppError';

export function Home() {
  const [groups, setGroups] = useState<string[]>([]);
  const [isLoading, setIsLoading] = useState<boolean>(true);

  // const exercises = [
  //   {
  //     exercise: 'Puxada frontal',
  //     url: 'https://cienciadotreinamento.com.br/wp-content/uploads/2015/11/Lat-pulldown-3_2.jpg',
  //   },
  //   {
  //     exercise: 'Remada curvada',
  //     url: 'https://p2.trrsf.com/image/fget/cf/1200/1200/middle/images.terra.com/2023/05/05/1301740817-remada-curvada.jpg',
  //   },
  //   {
  //     exercise: 'Remada unilateral',
  //     url: 'data:image/jpeg;base64,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',
  //   },
  //   {
  //     exercise: 'Levantamento terra',
  //     url: 'data:image/jpeg;base64,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',
  //   },
  // ];

  const [exercises, setExercises] = useState<ExerciseDTO[]>([]);

  const [groupSelected, setGroupSelected] = useState('antebraço');

  const { navigate } = useNavigation<AppNavigatorRoutesProps>();

  function handleOpenExerciseDetails(exerciseId: string) {
    navigate('exercise', { exerciseId });
  }

  async function fetchGroups() {
    const { data } = await api.get('/groups');

    setGroups(data);
  }

  async function fetchExercisesByGroup() {
    try {
      setIsLoading(true);
      const { data } = await api.get(`/exercises/bygroup/${groupSelected}`);

      setExercises(data);
    } catch (error) {
      const isAppError = error instanceof AppError;

      const title = isAppError ? error.message : 'Não foi possivel carregar os exercicios';

      Toast.show({
        title,
        placement: 'top',
        bgColor: 'red.500',
      });
    } finally {
      setIsLoading(false);
    }
  }

  useEffect(() => {
    fetchGroups();
  }, []);

  useFocusEffect(
    useCallback(() => {
      fetchExercisesByGroup();
    }, [groupSelected]),
  );

  return (
    <VStack flex={1}>
      <HomeHeader />

      <FlatList
        data={groups}
        keyExtractor={(item) => item}
        renderItem={({ item }) => (
          <Group
            name={item}
            isActive={groupSelected.toLocaleUpperCase() === item.toLocaleUpperCase()}
            onPress={() => setGroupSelected(item)}
          />
        )}
        horizontal
        showsHorizontalScrollIndicator={false}
        _contentContainerStyle={{
          px: 8,
        }}
        my={10}
        maxH={10}
        minH={10}
      />

      {isLoading ? (
        <Loading />
      ) : (
        <VStack flex={1} px={8}>
          <HStack justifyContent={'space-between'} mb={5}>
            <Heading color={'gray.200'} fontSize={'md'} fontFamily={'heading'}>
              Exercícios
            </Heading>

            <Text color={'gray.200'} fontSize={'md'}>
              {exercises.length}
            </Text>
          </HStack>

          <FlatList
            data={exercises}
            keyExtractor={(item) => item.id}
            renderItem={({ item }) => (
              <ExerciseCard
                onPress={() => handleOpenExerciseDetails(item.id)}
                name={item.name}
                image={item.thumb}
                repetitions={item.repetitions}
                series={item.series}
              />
            )}
            showsVerticalScrollIndicator={false}
            _contentContainerStyle={{ paddingBottom: 20 }}
          />
        </VStack>
      )}
    </VStack>
  );
}
